

<div class="row" style="background-color:azure">
    <br />

    <p class="right">

        @Html.ActionLink("Send New Request", "Create", null, new { @class = "btn btn-primary" })

    </p>

    @if (null != TempData["alertMessage"])
    {
        <script type="text/javascript">
           alert("@TempData["alertMessage"]");
        </script>
    }

    <div class="col-md-14">
        <div class="panel panel-primary list-panel" id="list-panel">
            <div class="panel-heading list-panel-heading">
                <h1 class="panel-title list-panel-title">List Of Requests</h1>
            </div>
            <div class="panel-body">
                <table id="example2" class="display table nowrap table-bordered" style="width:100%; border-collapse:separate; border-spacing:5px 0;">
                    <thead>
                        <tr>
                            <th th data-priority="1" style="background-color:lightgray;color: #000000">
                                Request Mode
                            </th>
                            <th th data-priority="2" style="background-color:lightgray;color: #000000">
                                Request Type
                            </th>
                            <th th data-priority="3" style="background-color:lightgray;color: #000000">
                                To Dept
                            </th>
                            <th th data-priority="4" style="background-color:lightgray;color: #000000">
                                Request Date
                            </th>
                            <th th data-priority="5" style="background-color:lightgray;color: #000000">
                                Remark
                            </th>
                            <th data-priority="6">
                                Attachement
                            </th>
                            <th data-priority="7"></th>
                            <th data-priority="8"></th>
                            <th data-priority="9"></th>
                            <th data-priority="10"></th>
                        </tr>

                    </thead>
                    <tbody>
                        @foreach (var item in ViewData.Model)
                        {
                            
                        <tr style='color: @(@item["Res_status"] == 2 ? "red" : "black");'>
                            <td>@item["RequestMode"]</td>
                            <td>@item["RequestType"]</td>
                            <td>@item["Sentto"]</td>
                            <td>@item["RequestDate"]</td>
                            <td>@item["RequestRemark"]</td>
                            <td><a href="~/Tender/DownloadFile?filePath=@item["RequestAttachement"]">Download</a> </td>



                            <td>@Html.ActionLink("View Replay", "ReplayList", "Response", new { id = item["id"] }, new { @class = "btn btn-warning float-left" })</td>
                            @if (Session["role"].ToString() != "Others")
                            {
                                <td style="padding:10px 0;">@Html.ActionLink("Edit", "Edit", new { id = item["id"] }, new { @class = "btn btn-success float-left" })</td>

                            <td>  @Html.ActionLink("Details", "Details", new { id = item["id"] }, new { @class = "btn btn-success " }) |</td>

                            <td> @Html.ActionLink("Delete", "Delete", new { id = item["id"] }, new { @class = "btn btn-danger float-left", onclick = "return confirm(' Are you sure you want to delete this record?' );" })</td>
                            }


                        </tr>
                        }
                    </tbody>
                </table>
            </div>
        </div>
    </div>
    <div>

        @if (Session["role"].ToString() == "Admin")
        {


           
            @Html.ActionLink("Back to Tender List", "Index", "Tender")

        }
        else
        {
            @Html.ActionLink("Back to Tender List", "Tender", "Index", new { Status = "Active", DepId = Session["SubDepartmentID"] }, null)
        }




    </div>
</div>

@section Scripts
{


    <script type="text/javascript">
        $(document).ready(function () {
            $('#example2').DataTable({
                "scrollY": 500,
                "scrollX": true,
                "responsive": true,

                "columnDefs": [
                    { responsivePriority: 1 },
                    { responsivePriority: 2 },
                    { responsivePriority: 3 },
                    { responsivePriority: 4 },
                    { responsivePriority: 5 },
                    { responsivePriority: 6 },

                    { responsivePriority: 7 },
                    { responsivePriority: 8 },
                    { responsivePriority: 9 },
                    { responsivePriority: 10 },

                    { responsivePriority: 11 },
                    { responsivePriority: 12 },
                    { responsivePriority: 13 },
                    { responsivePriority: 14 },
                    { responsivePriority: 15 },
                    { responsivePriority: 16 },
                    { responsivePriority: 17 },
                    { responsivePriority: 18 },
                    { responsivePriority: 17 },
                    { responsivePriority: 18 }


                ]

            });
        });





    </script>

}