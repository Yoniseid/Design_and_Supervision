@model Design_and_Supervion_Issue_Tracking.Models.ModelTenderDetail

@{
    Layout = "~/Views/Shared/_Layout.cshtml";

}

<link href="~/Scripts/jquery-ui.min.css" rel="stylesheet" />

<div class="panel panel-primary"> 
    <div class="panel-heading"><h2>Assign New personnel </h2></div>
    <div class="panel-body">

        @using (Html.BeginForm("Create", "TenderDetail", FormMethod.Post,
            new { enctype = "multipart/form-data" }))
        {
            @Html.AntiForgeryToken()
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })

            <div class="form-group row">
                @Html.Label("Assigned Team", "Sub Process Name: ", new { @class = "col-sm-12 col-md-3 col-lg-2 col-form-label" })
                <div class="col-sm-12 col-md-9 col-lg-10">
                    @if (ViewBag.AssignedTeam != null)
                    {
                        @Html.DropDownListFor(model => model.AssignedTeam, ViewBag.AssignedTeam as SelectList, "--Select--", new { @class = "form-control" })
                    }
                    @Html.ValidationMessageFor(model => model.AssignedTeam, "", new { @class = "text-danger" })

                </div>
            </div>
            <div class="form-group row">
                @Html.Label("Assigned Personnel", "Employee Name ", new { @class = "col-sm-12 col-md-3 col-lg-2 col-form-label" })
                <div class="col-sm-12 col-md-9 col-lg-10">

                    @Html.DropDownListFor(model => model.Responsible_Personnel, new SelectList(""), "--Select Employee--", new { @class = "form-control" })


                    @Html.ValidationMessageFor(model => model.Responsible_Personnel, "", new { @class = "text-danger" })

                </div>
            </div>

            <div class="form-group row">
                <div class="col-md-4 mb-0">
                    @Html.LabelFor(model => model.DateOfAssign, "Date of Assign ")
                    <input id="dateofassign" name="dateofassign" type="date" class="form-control" />
                    <div class="valid-feedback">
                        @Html.ValidationMessageFor(model => model.DateOfAssign, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="col-md-4 mb-0">
                    @Html.LabelFor(model => model.initialdeadlinedate, "Initial Deadline Date ")
                    <input id="initialdeadlinedate" name="initialdeadlinedate" type="date" class="form-control" />
                    <div class="valid-feedback">
                        @Html.ValidationMessageFor(model => model.initialdeadlinedate, "", new { @class = "text-danger" })
                    </div>
                </div>
               

            </div>

            <div class="form-group row">
                @Html.LabelFor(model => model.Attachment, "Attachement ", new { @class = "col-sm-12 col-md-3 col-lg-2 col-form-label" })
                <div class="col-sm-12 col-md-9 col-lg-10">
                    <input type="file" value="-" name="file" id="file" class="form-control" />

                </div>
            </div>
            <div class="form-group row">
                @Html.LabelFor(model => model.Remark, "Remark ", new { @class = "col-sm-12 col-md-3 col-lg-2 col-form-label" })
                <div class="col-sm-12 col-md-9 col-lg-10">
                    @Html.TextAreaFor(model => model.Remark, new { @class = "form-control", @rows = "6" })
                    @Html.ValidationMessageFor(model => model.Remark, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group row text-right">
                <div class="col-sm-12 col-md-9 col-lg-10">
                    <input type="submit" value="Submit Form" class="btn btn-primary" />
                </div>
            </div>
            <input type="text" id="ssubid" name="ssubid" type="hidden"/>
            <input type="hidden" id="personnelid" name="personnelid" />


        }

    </div>
    <div>

    </div>
</div>

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/bundles/jqueryval")

<script src="~/Scripts/jquery-3.3.1.min.js"></script>
<script src="~/Scripts/jquery-ui.min.js"></script>
<script>
     $(document).ready(function () {
        $("#AssignedTeam").change(function () {
            var DepId = $(this).val();
            debugger
            $.ajax({
                type: "post",
                url: "/TenderDetail/SelectPersonnel?SubDepartment=" + DepId,
                contentType: "html",
                success: function (response) {
                    debugger
                    $("#Responsible_Personnel").empty();
                    $("#Responsible_Personnel").append(response);
                }
            })

        })

     });
       

    $("datepicker").datepicker();
    $(document).ready(function () {
        $('input:text').each(function () {
            $(this).attr('enable', true);
        });


        $("[id$='AssignedTeam']").change(function () {
            var taxText = $("#AssignedTeam option:selected").text();;
            $("#ssubid").val(taxText);
        })
         
        $("[id$='Responsible_Personnel']").change(function () {
            var taxText = $("#Responsible_Personnel option:selected").text();;
            $("#personnelid").val(taxText);
        })

    });
</script>



























































































